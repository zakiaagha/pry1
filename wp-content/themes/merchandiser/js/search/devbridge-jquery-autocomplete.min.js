!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function b(c,d){var e=function(){},e={autoSelectFirst:!1,appendTo:"body",serviceUrl:null,lookup:null,onSelect:null,width:"auto",minChars:1,maxHeight:300,deferRequestBy:0,params:{},formatResult:b.formatResult,delimiter:null,zIndex:9999,type:"GET",noCache:!1,onSearchStart:e,onSearchComplete:e,onSearchError:e,containerClass:"autocomplete-suggestions small-block-grid-1 medium-block-grid-4 large-block-grid-5 columns-6 xlarge-block-grid-6 xxlarge-block-grid-6",tabDisabled:!1,dataType:"text",currentRequest:null,triggerSelectOnValidInput:!0,preventBadQueries:!0,lookupFilter:function(a,b,c){return-1!==a.value.toLowerCase().indexOf(c)},paramName:"query",transformResult:function(b){return"string"==typeof b?a.parseJSON(b):b},showNoSuggestionNotice:!1,noSuggestionNotice:"No results"};this.element=c,this.el=a(c),this.suggestions=[],this.badQueries=[],this.selectedIndex=-1,this.currentValue=this.element.value,this.intervalId=0,this.cachedResponse={},this.onChange=this.onChangeInterval=null,this.isLocal=!1,this.suggestionsContainer=null,this.options=a.extend({},e,d),this.classes={selected:"autocomplete-selected",suggestion:"autocomplete-suggestion"},this.hint=null,this.hintValue="",this.selection=null,this.initialize(),this.setOptions(d)}
var c=function(){return{escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},createNode:function(a){var b=document.createElement("ul");return b.className=a,b.style.display="none",b}}}();b.utils=c,a.Autocomplete=b,b.formatResult=function(a,b){var d="("+c.escapeRegExChars(b)+")";return a.value.replace(new RegExp(d,"gi"),"<strong>$1</strong>")},b.prototype={killerFn:null,initialize:function(){var g,c=this,d="."+c.classes.suggestion,e=c.classes.selected,f=c.options;c.element.setAttribute("autocomplete","off"),c.killerFn=function(b){0===a(b.target).closest("."+c.options.containerClass).length&&(c.killSuggestions(),c.disableKillerFn())},c.suggestionsContainer=b.utils.createNode(f.containerClass),g=a(c.suggestionsContainer),g.appendTo(f.appendTo),"auto"!==f.width&&g.width(f.width),g.on("mouseover.autocomplete",d,function(){c.activate(a(this).data("index"))}),g.on("mouseout.autocomplete",function(){c.selectedIndex=-1,g.children("."+e).removeClass(e)}),g.on("click.autocomplete",d,function(){c.onSelect(a(this).data("index"))}),c.fixPosition(),c.fixPositionCapture=function(){c.visible&&c.fixPosition()},a(window).on("resize.autocomplete",c.fixPositionCapture),c.el.on("keydown.autocomplete",function(a){c.onKeyPress(a)}),c.el.on("keyup.autocomplete",function(a){c.onKeyUp(a)}),c.el.on("blur.autocomplete",function(){c.onBlur()}),c.el.on("change.autocomplete",function(a){c.onKeyUp(a)})},onBlur:function(){},setOptions:function(b){var c=this.options;a.extend(c,b),(this.isLocal=a.isArray(c.lookup))&&(c.lookup=this.verifySuggestionsFormat(c.lookup)),a(this.suggestionsContainer)},clearCache:function(){this.cachedResponse={},this.badQueries=[]},clear:function(){this.clearCache(),this.currentValue="",this.suggestions=[]},disable:function(){this.disabled=!0,this.currentRequest&&this.currentRequest.abort()},enable:function(){this.disabled=!1},fixPosition:function(){var b;"body"===this.options.appendTo&&(b=this.el.offset(),b={top:b.top+this.el.outerHeight()+"px",left:b.left+"px"},"auto"===this.options.width&&(b.width=this.el.outerWidth()-2+"px"),a(this.suggestionsContainer).css(b))},enableKillerFn:function(){a(document).on("click.autocomplete",this.killerFn)},disableKillerFn:function(){a(document).off("click.autocomplete",this.killerFn)},killSuggestions:function(){var a=this;a.stopKillSuggestions(),a.intervalId=window.setInterval(function(){a.hide(),a.stopKillSuggestions()},50)},stopKillSuggestions:function(){window.clearInterval(this.intervalId)},isCursorAtEnd:function(){var a=this.el.val().length,b=this.element.selectionStart;return"number"==typeof b?b===a:!document.selection||(b=document.selection.createRange(),b.moveStart("character",-a),a===b.text.length)},onKeyPress:function(a){if(this.disabled||this.visible||40!==a.which||!this.currentValue){if(!this.disabled&&this.visible){switch(a.which){case 27:this.el.val(this.currentValue),this.hide();break;case 13:if(-1===this.selectedIndex)return void this.hide();if(this.onSelect(this.selectedIndex),9===a.which&&!1===this.options.tabDisabled)return;break;default:return}
a.stopImmediatePropagation(),a.preventDefault()}}else this.suggest()},onKeyUp:function(a){var b=this;if(!b.disabled){switch(a.which){case 38:case 40:return}
clearInterval(b.onChangeInterval),b.currentValue!==b.el.val()&&(0<b.options.deferRequestBy?b.onChangeInterval=setInterval(function(){b.onValueChange()},b.options.deferRequestBy):b.onValueChange())}},onValueChange:function(){var b=this.options,c=this.el.val(),d=this.getQuery(c);return this.selection&&(this.selection=null,(b.onInvalidateSelection||a.noop).call(this.element)),clearInterval(this.onChangeInterval),this.currentValue=c,this.selectedIndex=-1,b.triggerSelectOnValidInput&&(c=this.findSuggestionIndex(d),-1!==c)?void this.onSelect(c):void(d.length<b.minChars?this.hide():this.getSuggestions(d))},findSuggestionIndex:function(b){var c=-1,d=b.toLowerCase();return a.each(this.suggestions,function(a,b){if(b.value.toLowerCase()===d)return c=a,!1}),c},getQuery:function(b){var c=this.options.delimiter;return c?(b=b.split(c),a.trim(b[b.length-1])):b},getSuggestionsLocal:function(b){var c=this.options,d=b.toLowerCase(),e=c.lookupFilter,f=parseInt(c.lookupLimit,10),c={suggestions:a.grep(c.lookup,function(a){return e(a,b,d)})};return f&&c.suggestions.length>f&&(c.suggestions=c.suggestions.slice(0,f)),c},getSuggestions:function(b){var widget=document.getElementsByClassName('search-widget-area');if(widget){widget[0].setAttribute('style','display: none !important')}
var c,g,h,d=this,e=d.options,f=e.serviceUrl;e.params[e.paramName]=b,g=e.ignoreParams?null:e.params,d.isLocal?c=d.getSuggestionsLocal(b):(a.isFunction(f)&&(f=f.call(d.element,b)),h=f+"?"+a.param(g||{}),c=d.cachedResponse[h]),c&&a.isArray(c.suggestions)?(d.suggestions=c.suggestions,d.suggest()):d.isBadQuery(b)||!1===e.onSearchStart.call(d.element,e.params)||(d.currentRequest&&d.currentRequest.abort(),d.currentRequest=a.ajax({url:f,data:g,type:e.type,dataType:e.dataType}).done(function(a){d.currentRequest=null,a=e.transformResult(a),d.processResponse(a,b,h),e.onSearchComplete.call(d.element,b,a.suggestions)}).fail(function(a,c,f){e.onSearchError.call(d.element,b,a,c,f)}))},isBadQuery:function(a){if(!this.options.preventBadQueries)return!1;for(var b=this.badQueries,c=b.length;c--;)
if(0===a.indexOf(b[c]))return!0;return!1},hide:function(){this.visible=!1,this.selectedIndex=-1,a(this.suggestionsContainer).hide()
setTimeout(function(){var widget=document.getElementsByClassName('search-widget-area');if(widget){widget[0].setAttribute('style','display: block')}},200)},suggest:function(){if(0===this.suggestions.length)this.options.showNoSuggestionNotice?this.noSuggestions():this.hide();else{var j,b=this.options,c=b.formatResult,d=this.getQuery(this.currentValue),e=this.classes.suggestion,f=this.classes.selected,g=a(this.suggestionsContainer),h=b.beforeRender,i="";if(b.triggerSelectOnValidInput&&(j=this.findSuggestionIndex(d),-1!==j))return void this.onSelect(j);a.each(this.suggestions,function(a,b){i+='<li class="'+b.id+" "+e+'" data-index="'+a+'"><div class="autocomplete-suggestion-image">'+b.image+'</div><div class="autocomplete-suggestion-info"><a href ="'+b.url+'">'+c(b,d)+"<br />"+b.price+"</a></li></div>"}),g.html(i),b.autoSelectFirst&&(this.selectedIndex=0,g.children().first().addClass(f)),a.isFunction(h)&&h.call(this.element,g),g.show(),this.visible=!0}},noSuggestions:function(){var c,b=a(this.suggestionsContainer);c=""+('<div class="autocomplete-no-suggestion">'+this.options.noSuggestionNotice+"</div>"),this.adjustContainerWidth(),b.html(c),b.show(),this.visible=!0},verifySuggestionsFormat:function(b){return b.length&&"string"==typeof b[0]?a.map(b,function(a){return{value:a,data:null}}):b},processResponse:function(a,b,c){var d=this.options;a.suggestions=this.verifySuggestionsFormat(a.suggestions),d.noCache||(this.cachedResponse[c]=a,d.preventBadQueries&&0===a.suggestions.length&&this.badQueries.push(b)),b===this.getQuery(this.currentValue)&&(this.suggestions=a.suggestions,this.suggest())},activate:function(b){var c=this.classes.selected,d=a(this.suggestionsContainer),e=d.children();return d.children("."+c).removeClass(c),this.selectedIndex=b,-1!==this.selectedIndex&&e.length>this.selectedIndex?(b=e.get(this.selectedIndex),a(b).addClass(c),b):null},adjustScroll:function(b){var d,e,c=this.activate(b);c&&(c=c.offsetTop,d=a(this.suggestionsContainer).scrollTop(),e=d+this.options.maxHeight-25,c<d?a(this.suggestionsContainer).scrollTop(c):c>e&&a(this.suggestionsContainer).scrollTop(c-this.options.maxHeight+25),this.el.val(this.getValue(this.suggestions[b].value)))},onSelect:function(b){var c=this.options.onSelect;b=this.suggestions[b],this.currentValue=this.getValue(b.value),this.currentValue!==this.el.val()&&this.el.val(this.currentValue),this.suggestions=[],this.selection=b,a.isFunction(c)&&c.call(this.element,b)},getValue:function(a){var c,b=this.options.delimiter;return b?(c=this.currentValue,b=c.split(b),1===b.length?a:c.substr(0,c.length-b[b.length-1].length)+a):a},dispose:function(){this.el.off(".autocomplete").removeData("autocomplete"),this.disableKillerFn(),a(window).off("resize.autocomplete",this.fixPositionCapture),a(this.suggestionsContainer).remove()}},a.fn.autocomplete=function(c,d){return 0===arguments.length?this.first().data("autocomplete"):this.each(function(){var e=a(this),f=e.data("autocomplete");"string"==typeof c?f&&"function"==typeof f[c]&&f[c](d):(f&&f.dispose&&f.dispose(),f=new b(this,c),e.data("autocomplete",f))})}})